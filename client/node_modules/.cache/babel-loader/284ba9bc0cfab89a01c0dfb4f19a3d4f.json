{"ast":null,"code":"var _jsxFileName = \"/home/kaerah/Projects/book-review-app/client/src/components/Login.js\";\nimport React, { Component } from 'react';\nimport './css/Login.css';\nimport firebase from './api/firebase';\nimport { Redirect } from 'react-router';\nexport class Login extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      email: '',\n      password: '',\n      error: '',\n      loggedIn: false\n    };\n\n    this.handleLogin = e => {\n      e.preventDefault();\n      firebase.auth().signInWithEmailAndPassword(this.state.email, this.state.password).then(this.onLoginSuccess.bind(this)).catch(error => {\n        let errorMessage = error.message;\n        alert(errorMessage);\n      });\n    };\n\n    this.handleLogout = e => {\n      e.preventDefault();\n      firebase.auth().signOut().then(() => {\n        console.log('logged out');\n        this.resetState(false);\n      });\n    };\n\n    this.resetState = loginState => {\n      this.setState({\n        email: '',\n        password: '',\n        loggedIn: loginState\n      });\n    };\n\n    this.onLoginSuccess = () => {\n      this.resetState(true);\n      console.log('successful login');\n    };\n\n    this.createAccount = () => {\n      firebase.auth().createUserWithEmailAndPassword(this.state.email, this.state.password).then(cred => {\n        return firebase.firestore().collection('users').doc(cred.user.uid).set({\n          savedBooks: []\n        });\n      }).then(() => this.onLoginSuccess.bind(this)).catch(error => {\n        let errorMessage = error.message;\n        alert(\"\".concat(errorMessage));\n      });\n    };\n  }\n\n  componentWillMount() {\n    if (!firebase.auth().currentUser) {\n      this.setState({\n        loggedIn: false\n      });\n    }\n  }\n\n  render() {\n    if (this.state.loggedIn) return React.createElement(Redirect, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    });\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      className: \"page-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, \"Please login.\"), React.createElement(\"form\", {\n      onSubmit: this.handleLogin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, \"Email\"), React.createElement(\"input\", {\n      onChange: e => this.setState({\n        email: e.target.value\n      }),\n      className: \"form-control\",\n      placeholder: \"Email\",\n      name: \"email\",\n      type: \"text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"Password\"), React.createElement(\"input\", {\n      onChange: e => this.setState({\n        password: e.target.value\n      }),\n      className: \"form-control\",\n      placeholder: \"Password\",\n      name: \"password\",\n      type: \"password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      className: \"btn btn-dark\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, \"Submit\")), React.createElement(\"button\", {\n      className: \"btn btn-dark\",\n      onClick: this.createAccount,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, \"Create Account\"));\n  }\n\n}\nexport default Login;","map":{"version":3,"sources":["/home/kaerah/Projects/book-review-app/client/src/components/Login.js"],"names":["React","Component","firebase","Redirect","Login","state","email","password","error","loggedIn","handleLogin","e","preventDefault","auth","signInWithEmailAndPassword","then","onLoginSuccess","bind","catch","errorMessage","message","alert","handleLogout","signOut","console","log","resetState","loginState","setState","createAccount","createUserWithEmailAndPassword","cred","firestore","collection","doc","user","uid","set","savedBooks","componentWillMount","currentUser","render","target","value"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './css/Login.css';\nimport firebase from './api/firebase';\nimport { Redirect } from 'react-router';\nexport class Login extends Component {\n  state = {\n    email: '',\n    password: '',\n    error: '',\n    loggedIn: false\n  };\n  componentWillMount() {\n    if (!firebase.auth().currentUser) {\n      this.setState({\n        loggedIn: false\n      });\n    }\n  }\n\n  handleLogin = e => {\n    e.preventDefault();\n    firebase\n      .auth()\n      .signInWithEmailAndPassword(this.state.email, this.state.password)\n      .then(this.onLoginSuccess.bind(this))\n      .catch(error => {\n        let errorMessage = error.message;\n        alert(errorMessage);\n      });\n  };\n\n  handleLogout = e => {\n    e.preventDefault();\n    firebase\n      .auth()\n      .signOut()\n      .then(() => {\n        console.log('logged out');\n        this.resetState(false);\n      });\n  };\n\n  resetState = loginState => {\n    this.setState({\n      email: '',\n      password: '',\n      loggedIn: loginState\n    });\n  };\n\n  onLoginSuccess = () => {\n    this.resetState(true);\n    console.log('successful login');\n  };\n\n  createAccount = () => {\n    firebase\n      .auth()\n      .createUserWithEmailAndPassword(this.state.email, this.state.password)\n      .then(cred => {\n        return firebase\n          .firestore()\n          .collection('users')\n          .doc(cred.user.uid)\n          .set({\n            savedBooks: []\n          });\n      })\n      .then(() => this.onLoginSuccess.bind(this))\n      .catch(error => {\n        let errorMessage = error.message;\n        alert(`${errorMessage}`);\n      });\n  };\n\n  render() {\n    if (this.state.loggedIn) return <Redirect to=\"/\" />;\n    return (\n      <div>\n        <h3 className=\"page-header\">Please login.</h3>\n        <form onSubmit={this.handleLogin}>\n          <div className=\"form-group\">\n            <label>Email</label>\n            <input\n              onChange={e => this.setState({ email: e.target.value })}\n              className=\"form-control\"\n              placeholder=\"Email\"\n              name=\"email\"\n              type=\"text\"\n            />\n          </div>\n          <div className=\"form-group\">\n            <label>Password</label>\n            <input\n              onChange={e => this.setState({ password: e.target.value })}\n              className=\"form-control\"\n              placeholder=\"Password\"\n              name=\"password\"\n              type=\"password\"\n            />\n          </div>\n          <button className=\"btn btn-dark\">Submit</button>\n        </form>\n        <button className=\"btn btn-dark\" onClick={this.createAccount}>\n          Create Account\n        </button>\n      </div>\n    );\n  }\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}