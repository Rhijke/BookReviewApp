{"ast":null,"code":"import firebase from './firebase';\nexport const saveBook = async book => {\n  if (firebase.auth().currentUser) {\n    let userID = firebase.auth().currentUser.uid;\n    let dbCollectionUser = firebase.firestore().collection('users').doc(\"\".concat(userID));\n    let doc = await firebase.firestore().collection('users').doc(\"\".concat(userID)).get();\n    let savedBooks = doc.data().savedBooks;\n\n    if (!savedBooks.includes(book)) {\n      let resolve = await dbCollectionUser.update({\n        savedBooks: firebase.firestore.FieldValue.arrayUnion(book)\n      });\n      console.log(resolve);\n      return true;\n    } else {\n      let resolve = dbCollectionUser.update({\n        savedBooks: firebase.firestore.FieldValue.arrayRemove(book)\n      });\n\n      if (resolve) {\n        console.log('Book successfully removed!');\n        return false;\n      }\n    }\n  }\n};\nexport const checkSavedBook = async book => {\n  if (firebase.auth().currentUser) {\n    let userID = firebase.auth().currentUser.uid;\n    let doc = await firebase.firestore().collection('users').doc(\"\".concat(userID)).get();\n    let savedBooks = doc.data().savedBooks;\n    console.log(savedBooks);\n\n    if (savedBooks.includes(book)) {\n      console.log('found');\n      return true;\n    }\n\n    return false;\n  }\n};","map":{"version":3,"sources":["/home/kaerah/Projects/book-review-app/client/src/components/api/saveBook.js"],"names":["firebase","saveBook","book","auth","currentUser","userID","uid","dbCollectionUser","firestore","collection","doc","get","savedBooks","data","includes","resolve","update","FieldValue","arrayUnion","console","log","arrayRemove","checkSavedBook"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,YAArB;AAEA,OAAO,MAAMC,QAAQ,GAAG,MAAMC,IAAN,IAAc;AACpC,MAAIF,QAAQ,CAACG,IAAT,GAAgBC,WAApB,EAAiC;AAC/B,QAAIC,MAAM,GAAGL,QAAQ,CAACG,IAAT,GAAgBC,WAAhB,CAA4BE,GAAzC;AACA,QAAIC,gBAAgB,GAAGP,QAAQ,CAC5BQ,SADoB,GAEpBC,UAFoB,CAET,OAFS,EAGpBC,GAHoB,WAGbL,MAHa,EAAvB;AAKA,QAAIK,GAAG,GAAG,MAAMV,QAAQ,CACrBQ,SADa,GAEbC,UAFa,CAEF,OAFE,EAGbC,GAHa,WAGNL,MAHM,GAIbM,GAJa,EAAhB;AAMA,QAAIC,UAAU,GAAGF,GAAG,CAACG,IAAJ,GAAWD,UAA5B;;AACA,QAAI,CAACA,UAAU,CAACE,QAAX,CAAoBZ,IAApB,CAAL,EAAgC;AAC9B,UAAIa,OAAO,GAAG,MAAMR,gBAAgB,CAACS,MAAjB,CAAwB;AAC1CJ,QAAAA,UAAU,EAAEZ,QAAQ,CAACQ,SAAT,CAAmBS,UAAnB,CAA8BC,UAA9B,CAAyChB,IAAzC;AAD8B,OAAxB,CAApB;AAGAiB,MAAAA,OAAO,CAACC,GAAR,CAAYL,OAAZ;AACA,aAAO,IAAP;AACD,KAND,MAMO;AACL,UAAIA,OAAO,GAAGR,gBAAgB,CAACS,MAAjB,CAAwB;AACpCJ,QAAAA,UAAU,EAAEZ,QAAQ,CAACQ,SAAT,CAAmBS,UAAnB,CAA8BI,WAA9B,CAA0CnB,IAA1C;AADwB,OAAxB,CAAd;;AAGA,UAAIa,OAAJ,EAAa;AACXI,QAAAA,OAAO,CAACC,GAAR,CAAY,4BAAZ;AACA,eAAO,KAAP;AACD;AACF;AACF;AACF,CA/BM;AAiCP,OAAO,MAAME,cAAc,GAAG,MAAMpB,IAAN,IAAc;AAC1C,MAAIF,QAAQ,CAACG,IAAT,GAAgBC,WAApB,EAAiC;AAC/B,QAAIC,MAAM,GAAGL,QAAQ,CAACG,IAAT,GAAgBC,WAAhB,CAA4BE,GAAzC;AACA,QAAII,GAAG,GAAG,MAAMV,QAAQ,CACrBQ,SADa,GAEbC,UAFa,CAEF,OAFE,EAGbC,GAHa,WAGNL,MAHM,GAIbM,GAJa,EAAhB;AAMA,QAAIC,UAAU,GAAGF,GAAG,CAACG,IAAJ,GAAWD,UAA5B;AACAO,IAAAA,OAAO,CAACC,GAAR,CAAYR,UAAZ;;AAEA,QAAIA,UAAU,CAACE,QAAX,CAAoBZ,IAApB,CAAJ,EAA+B;AAC7BiB,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACA,aAAO,IAAP;AACD;;AACD,WAAO,KAAP;AACD;AACF,CAlBM","sourcesContent":["import firebase from './firebase';\n\nexport const saveBook = async book => {\n  if (firebase.auth().currentUser) {\n    let userID = firebase.auth().currentUser.uid;\n    let dbCollectionUser = firebase\n      .firestore()\n      .collection('users')\n      .doc(`${userID}`);\n\n    let doc = await firebase\n      .firestore()\n      .collection('users')\n      .doc(`${userID}`)\n      .get();\n\n    let savedBooks = doc.data().savedBooks;\n    if (!savedBooks.includes(book)) {\n      let resolve = await dbCollectionUser.update({\n        savedBooks: firebase.firestore.FieldValue.arrayUnion(book)\n      });\n      console.log(resolve);\n      return true;\n    } else {\n      let resolve = dbCollectionUser.update({\n        savedBooks: firebase.firestore.FieldValue.arrayRemove(book)\n      });\n      if (resolve) {\n        console.log('Book successfully removed!');\n        return false;\n      }\n    }\n  }\n};\n\nexport const checkSavedBook = async book => {\n  if (firebase.auth().currentUser) {\n    let userID = firebase.auth().currentUser.uid;\n    let doc = await firebase\n      .firestore()\n      .collection('users')\n      .doc(`${userID}`)\n      .get();\n\n    let savedBooks = doc.data().savedBooks;\n    console.log(savedBooks);\n\n    if (savedBooks.includes(book)) {\n      console.log('found');\n      return true;\n    }\n    return false;\n  }\n};\n"]},"metadata":{},"sourceType":"module"}