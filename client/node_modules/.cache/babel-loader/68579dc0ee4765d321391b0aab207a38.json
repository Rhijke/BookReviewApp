{"ast":null,"code":"var _jsxFileName = \"/home/kaerah/Projects/book-review-app/client/src/components/Login2.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport FontAwesome from 'react-fontawesome';\nexport default class Login2 extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      user: {},\n      disabled: ''\n    };\n\n    this.startAuth = () => {\n      if (!this.state.disabled) {\n        this.popup = this.openPopup();\n        this.checkPopup();\n        this.setState({\n          disabled: 'disabled'\n        });\n      }\n    };\n\n    this.closeCard = () => {\n      this.setState({\n        user: {}\n      });\n    };\n  }\n\n  componentDidMount() {\n    const _this$props = this.props,\n          socket = _this$props.socket,\n          provider = _this$props.provider;\n    socket.on(provider, user => {\n      this.popup.close();\n      this.setState({\n        user\n      });\n    });\n  }\n\n  checkPopup() {\n    const check = setInterval(() => {\n      const popup = this.popup;\n\n      if (!popup || popup.closed || popup.closed === undefined) {\n        clearInterval(check);\n        this.setState({\n          disabled: ''\n        });\n      }\n    }, 1000);\n  }\n\n  openPopup() {\n    const socket = this.props.socket;\n    const width = 600,\n          height = 600;\n    const left = window.innerWidth / 2 - width / 2;\n    const top = window.innerHeight / 2 - height / 2;\n    const url = \"http://localhost:3002/goodreads?socketId=\".concat(socket.id);\n    return window.open(url, '', \"toolbar=no, location=no, directories=no, status=no, menubar=no, \\n      scrollbars=no, resizable=no, copyhistory=no, width=\".concat(width, \", \\n      height=\").concat(height, \", top=\").concat(top, \", left=\").concat(left));\n  }\n\n  render() {\n    const _this$state$user = this.state.user,\n          name = _this$state$user.name,\n          photo = _this$state$user.photo;\n    const provider = this.props.provider;\n    const disabled = this.state.disabled;\n    const atSymbol = provider === 'twitter' ? '@' : '';\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, name ? React.createElement(\"div\", {\n      className: \"card\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: photo,\n      alt: name,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }), React.createElement(FontAwesome, {\n      name: \"times-circle\",\n      className: \"close\",\n      onClick: this.closeCard,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }), React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, \"\".concat(atSymbol).concat(name))) : React.createElement(\"div\", {\n      className: \"button-wrapper fadein-fast\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this.startAuth,\n      className: \"\".concat(provider, \" \").concat(disabled, \" button\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, \"login\")));\n  }\n\n}\nLogin2.propTypes = {\n  provider: PropTypes.string.isRequired,\n  socket: PropTypes.object.isRequired\n};","map":{"version":3,"sources":["/home/kaerah/Projects/book-review-app/client/src/components/Login2.js"],"names":["React","Component","PropTypes","FontAwesome","Login2","state","user","disabled","startAuth","popup","openPopup","checkPopup","setState","closeCard","componentDidMount","props","socket","provider","on","close","check","setInterval","closed","undefined","clearInterval","width","height","left","window","innerWidth","top","innerHeight","url","id","open","render","name","photo","atSymbol","propTypes","string","isRequired","object"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport FontAwesome from 'react-fontawesome';\n\nexport default class Login2 extends Component {\n  state = {\n    user: {},\n    disabled: ''\n  };\n\n  componentDidMount() {\n    const { socket, provider } = this.props;\n\n    socket.on(provider, user => {\n      this.popup.close();\n      this.setState({ user });\n    });\n  }\n\n  checkPopup() {\n    const check = setInterval(() => {\n      const { popup } = this;\n      if (!popup || popup.closed || popup.closed === undefined) {\n        clearInterval(check);\n        this.setState({ disabled: '' });\n      }\n    }, 1000);\n  }\n\n  openPopup() {\n    const { socket } = this.props;\n    const width = 600,\n      height = 600;\n    const left = window.innerWidth / 2 - width / 2;\n    const top = window.innerHeight / 2 - height / 2;\n    const url = `http://localhost:3002/goodreads?socketId=${socket.id}`;\n\n    return window.open(\n      url,\n      '',\n      `toolbar=no, location=no, directories=no, status=no, menubar=no, \n      scrollbars=no, resizable=no, copyhistory=no, width=${width}, \n      height=${height}, top=${top}, left=${left}`\n    );\n  }\n\n  startAuth = () => {\n    if (!this.state.disabled) {\n      this.popup = this.openPopup();\n      this.checkPopup();\n      this.setState({ disabled: 'disabled' });\n    }\n  };\n\n  closeCard = () => {\n    this.setState({ user: {} });\n  };\n\n  render() {\n    const { name, photo } = this.state.user;\n    const { provider } = this.props;\n    const { disabled } = this.state;\n    const atSymbol = provider === 'twitter' ? '@' : '';\n\n    return (\n      <div>\n        {name ? (\n          <div className=\"card\">\n            <img src={photo} alt={name} />\n            <FontAwesome\n              name=\"times-circle\"\n              className=\"close\"\n              onClick={this.closeCard}\n            />\n            <h4>{`${atSymbol}${name}`}</h4>\n          </div>\n        ) : (\n          <div className=\"button-wrapper fadein-fast\">\n            <button\n              onClick={this.startAuth}\n              className={`${provider} ${disabled} button`}\n            >\n              login\n            </button>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nLogin2.propTypes = {\n  provider: PropTypes.string.isRequired,\n  socket: PropTypes.object.isRequired\n};\n"]},"metadata":{},"sourceType":"module"}