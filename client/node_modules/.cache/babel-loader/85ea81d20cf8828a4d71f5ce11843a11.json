{"ast":null,"code":"import _objectSpread from \"/home/kaerah/Projects/book-review-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/home/kaerah/Projects/book-review-app/client/src/components/BookDetails.js\";\nimport React, { Component } from 'react';\nimport './css/BookDetails.css';\nimport { saveBook, checkSavedBook } from './api/saveBook';\nimport { fetchBookDescription } from './api/fetchBookDetails';\nexport class BookDetails extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      book: this.props.location.state,\n      loading: true\n    };\n\n    this.handleSavedBook = async () => {\n      let found = await checkSavedBook(this.state.book['id']);\n\n      let _ref = await fetchBookDescription(this.state.book['id']),\n          description = _ref.description,\n          isbn = _ref.isbn;\n\n      this.setState(prevState => ({\n        saved: found,\n        book: _objectSpread({}, prevState.book, {\n          description,\n          isbn\n        })\n      }));\n      this.setState({\n        loading: false\n      });\n    };\n  }\n\n  componentWillMount() {\n    this.handleSavedBook();\n    this.setState({\n      saved: checkSavedBook.call(this, this.state.book['id'])\n    });\n  }\n\n  render() {\n    if (this.state.loading === true) {\n      return React.createElement(\"h2\", {\n        className: \"page-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41\n        },\n        __self: this\n      }, \"Searching book details for \", this.state.book['title'], \".\");\n    }\n\n    return React.createElement(\"div\", {\n      className: \"detail-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }, console.log(this.state.loading), React.createElement(\"h3\", {\n      className: \"page-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }, this.state.book['title'], \" by \", this.state.book['author']), React.createElement(\"img\", {\n      src: \"\".concat(this.state.book['image']),\n      alt: \"\".concat(this.state.book['title'], \" book cover\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }), React.createElement(\"h4\", {\n      className: \"detail-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, \"Publication year: \", \"\".concat(this.state.book['publicationYear'])), React.createElement(\"h4\", {\n      className: \"detail-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, \"ISBN: \", \"\".concat(this.state.book['isbn'])), React.createElement(\"h4\", {\n      className: \"detail-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, \"Average Rating: \", \"\".concat(this.state.book['rating'])), React.createElement(\"button\", {\n      className: \"btn btn-dark\",\n      onClick: async () => {\n        let found = await saveBook.call(this, this.state.book['id']);\n        this.setState({\n          saved: found\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, this.state.saved ? 'Remove book' : 'Save Book'), this.state.book.description ? React.createElement(\"p\", {\n      dangerouslySetInnerHTML: {\n        __html: this.state.book.description\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }) : null);\n  }\n\n}\nexport default BookDetails;","map":{"version":3,"sources":["/home/kaerah/Projects/book-review-app/client/src/components/BookDetails.js"],"names":["React","Component","saveBook","checkSavedBook","fetchBookDescription","BookDetails","state","book","props","location","loading","handleSavedBook","found","description","isbn","setState","prevState","saved","componentWillMount","call","render","console","log","__html"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './css/BookDetails.css';\nimport { saveBook, checkSavedBook } from './api/saveBook';\nimport { fetchBookDescription } from './api/fetchBookDetails';\n\nexport class BookDetails extends Component {\n  state = {\n    book: this.props.location.state,\n    loading: true\n  };\n\n  handleSavedBook = async () => {\n    let found = await checkSavedBook(this.state.book['id']);\n    let { description, isbn } = await fetchBookDescription(\n      this.state.book['id']\n    );\n\n    this.setState(prevState => ({\n      saved: found,\n      book: {\n        ...prevState.book,\n        description,\n        isbn\n      }\n    }));\n\n    this.setState({\n      loading: false\n    });\n  };\n\n  componentWillMount() {\n    this.handleSavedBook();\n    this.setState({\n      saved: checkSavedBook.call(this, this.state.book['id'])\n    });\n  }\n  render() {\n    if (this.state.loading === true) {\n      return (\n        <h2 className=\"page-header\">\n          Searching book details for {this.state.book['title']}.\n        </h2>\n      );\n    }\n    return (\n      <div className=\"detail-container\">\n        {console.log(this.state.loading)}\n        <h3 className=\"page-header\">\n          {this.state.book['title']} by {this.state.book['author']}\n        </h3>\n\n        <img\n          src={`${this.state.book['image']}`}\n          alt={`${this.state.book['title']} book cover`}\n        />\n        <h4 className=\"detail-item\">\n          Publication year: {`${this.state.book['publicationYear']}`}\n        </h4>\n        <h4 className=\"detail-item\">ISBN: {`${this.state.book['isbn']}`}</h4>\n        <h4 className=\"detail-item\">\n          Average Rating: {`${this.state.book['rating']}`}\n        </h4>\n        <button\n          className=\"btn btn-dark\"\n          onClick={async () => {\n            let found = await saveBook.call(this, this.state.book['id']);\n            this.setState({\n              saved: found\n            });\n          }}\n        >\n          {this.state.saved ? 'Remove book' : 'Save Book'}\n        </button>\n\n        {this.state.book.description ? (\n          <p\n            dangerouslySetInnerHTML={{ __html: this.state.book.description }}\n          />\n        ) : null}\n      </div>\n    );\n  }\n}\n\nexport default BookDetails;\n"]},"metadata":{},"sourceType":"module"}