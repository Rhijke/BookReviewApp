{"ast":null,"code":"var _jsxFileName = \"/home/kaerah/Projects/book-review-app/client/src/components/Login2.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { link } from 'fs';\nconst linkButton = {\n  background: 'none',\n  border: 'none',\n  cursor: 'pointer'\n};\nexport default class Login2 extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      user: {},\n      disabled: ''\n    };\n\n    this.startAuth = () => {\n      if (!this.state.disabled) {\n        this.popup = this.openPopup();\n        this.checkPopup();\n        this.setState({\n          disabled: 'disabled'\n        });\n      }\n    };\n\n    this.closeCard = () => {\n      this.setState({\n        user: {}\n      });\n    };\n  }\n\n  componentDidMount() {\n    fetch(\"http://localhost:3002/wake-up\").then(res => {\n      if (res.ok) {\n        this.setState({\n          loading: false\n        });\n      }\n    });\n    const socket = this.props.socket;\n    console.log(socket);\n    socket.on('goodreads', user => {\n      console.log(\"User: \".concat(user));\n      this.popup.close();\n      this.setState({\n        user\n      });\n    });\n  }\n\n  checkPopup() {\n    const check = setInterval(() => {\n      const popup = this.popup;\n      console.log(popup);\n\n      if (!popup || popup.closed || popup.closed === undefined) {\n        clearInterval(check);\n        this.setState({\n          disabled: ''\n        });\n      }\n    }, 1000);\n  }\n\n  openPopup() {\n    const socket = this.props.socket;\n    const url = \"http://localhost:3002/goodreads?socketId=\".concat(socket.ids);\n    return window.open(url);\n  }\n\n  render() {\n    const _this$state$user = this.state.user,\n          id = _this$state$user.id,\n          name = _this$state$user.name;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, console.log(\"name: \".concat(name)), name ? React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, name) : React.createElement(\"button\", {\n      style: linkButton,\n      className: \"nav-link\",\n      onClick: this.startAuth.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, \"Login\"));\n  }\n\n}\nLogin2.propTypes = {\n  socket: PropTypes.object.isRequired\n};","map":{"version":3,"sources":["/home/kaerah/Projects/book-review-app/client/src/components/Login2.js"],"names":["React","Component","PropTypes","link","linkButton","background","border","cursor","Login2","state","user","disabled","startAuth","popup","openPopup","checkPopup","setState","closeCard","componentDidMount","fetch","then","res","ok","loading","socket","props","console","log","on","close","check","setInterval","closed","undefined","clearInterval","url","ids","window","open","render","id","name","bind","propTypes","object","isRequired"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { link } from 'fs';\n\nconst linkButton = {\n  background: 'none',\n  border: 'none',\n  cursor: 'pointer'\n};\n\nexport default class Login2 extends Component {\n  state = {\n    user: {},\n    disabled: ''\n  };\n\n  componentDidMount() {\n    fetch(`http://localhost:3002/wake-up`).then(res => {\n      if (res.ok) {\n        this.setState({ loading: false });\n      }\n    });\n\n    const { socket } = this.props;\n    console.log(socket);\n    socket.on('goodreads', user => {\n      console.log(`User: ${user}`);\n      this.popup.close();\n      this.setState({ user });\n    });\n  }\n\n  checkPopup() {\n    const check = setInterval(() => {\n      const { popup } = this;\n      console.log(popup);\n      if (!popup || popup.closed || popup.closed === undefined) {\n        clearInterval(check);\n        this.setState({ disabled: '' });\n      }\n    }, 1000);\n  }\n\n  openPopup() {\n    const { socket } = this.props;\n    const url = `http://localhost:3002/goodreads?socketId=${socket.ids}`;\n    return window.open(url);\n  }\n\n  startAuth = () => {\n    if (!this.state.disabled) {\n      this.popup = this.openPopup();\n      this.checkPopup();\n      this.setState({ disabled: 'disabled' });\n    }\n  };\n\n  closeCard = () => {\n    this.setState({ user: {} });\n  };\n\n  render() {\n    const { id, name } = this.state.user;\n\n    return (\n      <div>\n        {console.log(`name: ${name}`)}\n        {name ? (\n          <p>{name}</p>\n        ) : (\n          <button\n            style={linkButton}\n            className=\"nav-link\"\n            onClick={this.startAuth.bind(this)}\n          >\n            Login\n          </button>\n        )}\n      </div>\n    );\n  }\n}\n\nLogin2.propTypes = {\n  socket: PropTypes.object.isRequired\n};\n"]},"metadata":{},"sourceType":"module"}